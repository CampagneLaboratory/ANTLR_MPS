package model;

/*Generated by MPS */

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.FileInputStream;
import org.antlr.v4.runtime.ANTLRInputStream;
import org.campagnelab.antlr.r.functions.RLexer;
import org.antlr.v4.runtime.CommonTokenStream;
import org.campagnelab.antlr.r.functions.RFilter;
import org.campagnelab.antlr.r.functions.RParser;
import org.antlr.v4.runtime.RuleContext;
import org.campagnelab.antlr.r.functions.RBaseVisitor;

public class RPackageInspector {
  private static final String baseMessage = "Unable to inspect the package: ";
  private final File source;

  public RPackageInspector(File source) throws IOException {
    if (!(source.exists())) {
      throw new IOException(baseMessage + " source file " + source.getAbsolutePath() + " does not exist.");
    }
    this.source = source;
  }
  public void inspect() {
    try {
      InputStream is = new FileInputStream(source);
      ANTLRInputStream input = new ANTLRInputStream(is);
      RLexer lexer = new RLexer(input);
      CommonTokenStream tokens = new CommonTokenStream(lexer);
      RFilter filter = new RFilter(tokens);
      filter.stream();
      // call start rule: stream 
      tokens.reset();
      RParser parser = new RParser(tokens);
      parser.setBuildParseTree(true);
      RuleContext tree = parser.prog();
      RBaseVisitor visitor = new RFunctions_ToMpsVisitor();

    } catch (Exception e) {
    }

  }
}
